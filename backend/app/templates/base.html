<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>{% block title %}{% endblock %} | 控制面板</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --bg-dark:#0f1115;--bg-card:#181a1f;--bg-hover:#22242a;
      --border-color:#2c2f36;--text-main:#e6e7eb;--text-sub:#a1a1a1;
    }
    body{background:var(--bg-dark);color:var(--text-main);
         font-family:"Inter","Noto Sans TC",sans-serif;}
    .fade-in{animation:fade .4s ease-in-out;}
    @keyframes fade{from{opacity:0;transform:translateY(10px);}
                    to{opacity:1;transform:translateY(0);}}
    #sidebarToggle{display:none;}
    @media(max-width:1024px){
      #sidebarToggle{display:block;}
      #sidebar{transform:translateX(-100%);transition:transform .3s ease;}
      #sidebar.open{transform:translateX(0);}
      #overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);}
      #overlay.show{display:block;}
    }
  </style>
</head>

<body class="min-h-screen flex flex-col fade-in">
  <!-- Header -->
  <header class="flex items-center justify-between px-5 h-14 border-b border-[var(--border-color)] bg-[#121317]/80 backdrop-blur sticky top-0 z-20">
    <button id="sidebarToggle" class="text-gray-300 lg:hidden text-xl">☰</button>
    <h1 class="font-semibold tracking-wide text-lg">{{ guild.name }}</h1>
    <a href="/" class="text-sm text-[var(--text-sub)] hover:text-white transition">返回伺服器列表</a>
  </header>

  <div class="flex flex-1">
    <!-- 側邊欄 -->
    <aside id="sidebar" class="fixed top-0 left-0 h-full w-64 bg-[var(--bg-card)] border-r border-[var(--border-color)] flex flex-col z-30">
      <div class="flex items-center justify-center h-16 border-b border-[var(--border-color)]">
        <img src="https://cdn.discordapp.com/embed/avatars/0.png" class="w-10 h-10 mr-2 rounded-full border border-[var(--border-color)]">
        <span class="font-semibold text-lg text-[var(--text-main)]">你的機器人</span>
      </div>
      <nav class="flex-1 overflow-y-auto p-4 space-y-2">
        <a href="{{ url_for('servers.detail', guild_id=guild.id) }}"
           class="block px-3 py-2 rounded-lg {% if active_page=='info' %}bg-[var(--bg-hover)]{% endif %} hover:bg-indigo-600/20">
           伺服器資訊
        </a>
        <a href="{{ url_for('members.members', guild_id=guild.id) }}"
           class="block px-3 py-2 rounded-lg {% if active_page=='members' %}bg-[var(--bg-hover)]{% endif %} hover:bg-indigo-600/20">
           成員管理
        </a>
        {% block sidebar_links %}{% endblock %}
      </nav>
      <div class="p-4 border-t border-[var(--border-color)] text-center text-xs text-[var(--text-sub)]">
        © 2025 你的機器人 控制面板
      </div>
    </aside>

    <!-- Overlay -->
    <div id="overlay"></div>

    <!-- 主內容 -->
    <main id="mainContent" class="flex-1 p-6 lg:ml-64 transition-all overflow-hidden">
      {% block content %}{% endblock %}
    </main>
  </div>

<script>
  const sidebar=document.getElementById("sidebar");
  const overlay=document.getElementById("overlay");
  const toggle=document.getElementById("sidebarToggle");
  toggle?.addEventListener("click",()=>{sidebar.classList.toggle("open");overlay.classList.toggle("show");});
  overlay?.addEventListener("click",()=>{sidebar.classList.remove("open");overlay.classList.remove("show");});
</script>

{% block scripts %}{% endblock %}

</body>
</html>
